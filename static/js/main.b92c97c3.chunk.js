(this.webpackJsonpwaether=this.webpackJsonpwaether||[]).push([[0],{27:function(e,t,a){},47:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(6),c=a.n(o),i=(a(27),a(7)),s=a.n(i),l=a(19),u=a(22),p=a(20),d=a.n(p),y=a(2),m=function(e,t){var a,n;switch(t.type){case"SET_TEMPERATURE":return Object(y.a)(Object(y.a)({},e),{},{temperature:t.payload});case"SET_POSITION":return Object(y.a)(Object(y.a)({},e),{},{position:{lon:t.payload.lon,lat:t.payload.lat}});case"SET_CITY":return Object(y.a)(Object(y.a)({},e),{},{city:t.payload});case"SET_INPUT_CITY":return Object(y.a)(Object(y.a)({},e),{},{inpCity:t.payload});case"SET_LOADING":return Object(y.a)(Object(y.a)({},e),{},{isLoading:{temperature:null===(a=t.payload)||void 0===a?void 0:a.temperature,city:null===(n=t.payload)||void 0===n?void 0:n.city}});case"SET_WEATHER":return Object(y.a)(Object(y.a)({},e),{},{weather:t.payload});case"SET_FORECAST":return Object(y.a)(Object(y.a)({},e),{},{forecast:t.payload});default:return e}},j=(a(47),a(21)),h=a.n(j),O=a(0),b=Object(n.memo)((function(e){var t=e.temp;return Object(O.jsx)("div",{className:"temperature",children:Object(O.jsx)(h.a,{animateToNumber:t,animationType:"random"})})})),g=Object(n.memo)((function(e){var t=e.city;return Object(O.jsx)("div",{className:"city",children:t})}));function f(e){return e&&"number"===typeof e?Math.round(e-273.15):0}var v=Object(n.memo)((function(e){var t=e.city,a=e.temperature,r=e.weather,o=e.forecast;return Object(n.useEffect)((function(){o=o.map((function(e){var t={};console.log(e),t.dt_txt=e.dt_txt.match(/\d\d:\d\d/)[0],t.temp=f(e.main.temp),t.weather=e.weather}))}),[o]),console.log(o),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(g,{city:t}),Object(O.jsx)(b,{temp:a}),Object.keys(r).length>1?Object(O.jsxs)("div",{className:"weath",children:[Object(O.jsx)("div",{className:"icon",children:Object(O.jsx)("img",{src:function(e){var t=new Date(e.dt).getHours(),a="img/weather_icons/animated/";if(t<20&&t>=6)switch(e.main){case"Thunderstorm":return a+"thunder.svg";case"Drizzle":return a+"rainy-4.svg";case"Rain":return a+"rainy-6.svg";case"Snow":return a+"snowy-5.svg";case"Clear":return a+"day.svg";case"Clouds":return a+"cloudy.svg";default:return""}else switch(e.main){case"Thunderstorm":return a+"thunder.svg";case"Drizzle":return a+"rainy-4.svg";case"Rain":return a+"rainy-6.svg";case"Snow":return a+"snowy-5.svg";case"Clear":return a+"night.svg";case"Clouds":return a+"cloudy-night-3.svg";default:return""}}(r),alt:"nope"})}),Object(O.jsx)("div",{className:"description",children:r.description})]}):""]})}));var T=function(){var e=Object(n.useReducer)(m,{city:"",temperature:0,inpCity:"",position:{},isLoading:{},weather:{},forecast:[]}),t=Object(u.a)(e,2),a=t[0],r=t[1];function o(){return c.apply(this,arguments)}function c(){return(c=Object(l.a)(s.a.mark((function e(){var t,n,o=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:{},n={method:"GET",url:"https://api.openweathermap.org/data/2.5/forecast",params:{appid:"a482831921ae4546e7f36c4415ede7b8",lang:"ru",temp:"Celsius"}},a.inpCity?n.params.q=a.inpCity:a.position.lon?(n.params.lon=a.position.lon,n.params.lat=a.position.lat):t.lon?(n.params.lon=t.lon,n.params.lat=t.lat):n.params.q="Moscow",d.a.request(n).then((function(e){var t=e.data.list[0].dt,n=e.data.list.slice(0,10),o=e.data.list[0].weather[0],c=e.data.list[0].main.temp;o.dt=t,a.inpCity?r({type:"SET_CITY",payload:a.inpCity}):r({type:"SET_CITY",payload:e.data.city.name}),r({type:"SET_WEATHER",payload:o}),r({type:"SET_FORECAST",payload:n}),r({type:"SET_TEMPERATURE",payload:f(c)})})).catch((function(e){console.error("error")}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){console.log("check geo"),"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){console.log(e);var t=e.coords,n={lat:t.latitude,lon:t.longitude};r({type:"SET_POSITION",payload:n}),console.log(a.position),console.log("position success"),o(n)}),(function(e){console.log("position error"),console.log(e),r({type:"SET_POSITION",payload:{}}),o()}),{enableHighAccuracy:!0,timeout:5e4,maximumAge:5e3}):(console.log("geo false"),o())}),[]),Object(n.useEffect)((function(){o(a.position)}),[a.inpCity]),Object(O.jsx)("div",{className:"wrapper",children:Object(O.jsxs)("div",{className:"window",children:[Object(O.jsx)("input",{value:a.inpCity,onChange:function(e){r({type:"SET_INPUT_CITY",payload:e.target.value})},placeholder:"\u0413\u041e\u0420\u041e\u0414",type:"text",className:"input__city"}),Object(O.jsx)(v,{city:a.city,temperature:a.temperature,weather:a.weather,forecast:a.forecast})]})})};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(T,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.b92c97c3.chunk.js.map