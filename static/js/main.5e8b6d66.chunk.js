(this.webpackJsonpwaether=this.webpackJsonpwaether||[]).push([[0],{27:function(e,t,a){},66:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),o=a(6),i=a.n(o),s=(a(27),a(7)),c=a.n(s),l=a(19),u=a(22),p=a(20),d=a.n(p),y=a(2),m=function(e,t){var a,n;switch(t.type){case"SET_TEMPERATURE":return Object(y.a)(Object(y.a)({},e),{},{temperature:t.payload});case"SET_POSITION":return Object(y.a)(Object(y.a)({},e),{},{position:{lon:t.payload.lon,lat:t.payload.lat}});case"SET_CITY":return Object(y.a)(Object(y.a)({},e),{},{city:t.payload});case"SET_INPUT_CITY":return Object(y.a)(Object(y.a)({},e),{},{inpCity:t.payload});case"SET_LOADING":return Object(y.a)(Object(y.a)({},e),{},{isLoading:{temperature:null===(a=t.payload)||void 0===a?void 0:a.temperature,city:null===(n=t.payload)||void 0===n?void 0:n.city}});case"SET_WEATHER":return Object(y.a)(Object(y.a)({},e),{},{weather:t.payload});default:return e}},h=a(21),g=a.n(h),j=(a(66),a(0));var v=function(){var e=Object(n.useReducer)(m,{city:"",temperature:0,inpCity:"",position:{},isLoading:{},weather:{}}),t=Object(u.a)(e,2),a=t[0],r=t[1];function o(e){return e&&"number"===typeof e?Math.round(e-273.15):0}function i(){return s.apply(this,arguments)}function s(){return(s=Object(l.a)(c.a.mark((function e(){var t,n,i=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.length>0&&void 0!==i[0]?i[0]:{},n={method:"GET",url:"https://api.openweathermap.org/data/2.5/forecast",params:{appid:"a482831921ae4546e7f36c4415ede7b8",lang:"ru",temp:"Celsius"}},a.inpCity?n.params.q=a.inpCity:a.position.lon?(n.params.lon=a.position.lon,n.params.lat=a.position.lat):t.lon?(n.params.lon=t.lon,n.params.lat=t.lat):n.params.q="Moscow",d.a.request(n).then((function(e){console.log(e.data);var t=e.data.list[0].dt,n=e.data.list[0].weather[0],i=e.data.list[0].main.temp;n.dt=t,a.inpCity?r({type:"SET_CITY",payload:a.inpCity}):r({type:"SET_CITY",payload:e.data.city.name}),r({type:"SET_WEATHER",payload:n}),r({type:"SET_TEMPERATURE",payload:o(i)})})).catch((function(e){console.error("error")}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){console.log(e);var t=e.coords,n={lat:t.latitude,lon:t.longitude};r({type:"SET_POSITION",payload:n}),console.log(a.position),console.log("position success"),i(n)}),(function(e){console.log("position error"),console.log(e),r({type:"SET_POSITION",payload:{}}),i()}),{enableHighAccuracy:!0,timeout:5e4,maximumAge:5e3}):(console.log("geo false"),i())}),[a.inpCity]),Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsxs)("div",{className:"window",children:[Object(j.jsx)("input",{value:a.inpCity,onChange:function(e){r({type:"SET_INPUT_CITY",payload:e.target.value})},placeholder:"\u0413\u041e\u0420\u041e\u0414",type:"text",className:"input__city"}),Object(j.jsx)("div",{className:"city",children:a.city}),Object(j.jsx)("div",{className:"temperature",children:Object(j.jsx)(g.a,{animateToNumber:a.temperature,animationType:"random"})}),Object.keys(a.weather).length>1?Object(j.jsxs)("div",{className:"weath",children:[Object(j.jsx)("div",{className:"icon",children:Object(j.jsx)("img",{src:function(e){var t=new Date(e.dt).getHours(),a="./img/weather_icons/animated/";if(t<20&&t>=6)switch(e.main){case"Thunderstorm":return a+"thunder.svg";case"Drizzle":return a+"rainy-4.svg";case"Rain":return a+"rainy-6.svg";case"Snow":return a+"snowy-5.svg";case"Clear":return a+"day.svg";case"Clouds":return a+"cloudy.svg";default:return""}else switch(e.main){case"Thunderstorm":return a+"thunder.svg";case"Drizzle":return a+"rainy-4.svg";case"Rain":return a+"rainy-6.svg";case"Snow":return a+"snowy-5.svg";case"Clear":return a+"night.svg";case"Clouds":return a+"cloudy-night-3.svg";default:return""}}(a.weather),alt:""})}),Object(j.jsx)("div",{className:"description",children:a.weather.description})]}):""]})})};i.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.5e8b6d66.chunk.js.map